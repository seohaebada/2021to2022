## 쓰레드의 동기화
싱글스레드 프로세스의 경우 프로세스 내에서 단 하나의 쓰레드만 작업하기 대문에 프로세스의 자원을 가지고 작업하는데 별문제가 없지만,
멀티쓰레드 프로세스의 경우 여러 쓰레드가 같은 프로세스 내의 자원을 공유해서 작업하기 때문에 서로의 작업에 영향을 주게된다.

만일 쓰레드 A가 작업하던 도중에 다른 쓰레드 B에게 제어권이 넘어갔을대 쓰레드 A가 작업하던 공유 데이터를 쓰레드 B가 임의로 변경했다면,
다시 쓰레드A가 제어권을 받아서 나머지작업을 마쳤을때 원래 의도했떤 것과는 다른 결과를 얻을 수 있다.
이러한 일이 발생하는 것을 방지하기 위해서 한 쓰레드가 특정 작업을 끝마치기 전까지 다른 쓰레드에 의해 방해받지 않도록 하는 것이 중요하다.
그래서 도임된 개념ㄴ이 바로 '임계영역(critical section)', '락 (lock)' 이다.

= 공유 데이터를 사용하는 코드 영역을 임계 영역으로 지정해놓고, 공유 데이터(객체)가 가지고있는 lock을 획득한 단 하나의 쓰레드만
이 영역 내의 코드를 수행할 수 있도록 한다. 그리고 해당 쓰레드가 임계 영역 내의 모든 코드를 수행하고 벗어나서,
lock을 반납한 후에야 다른 쓰레드가 반납된 lock을 획득하여 임계 영역의 코드를 수행할 수 있게 된다.

- 쓰레드 동기화 : 이처럼 한 쓰레드가 진행중인 작업을 다른 쓰레드가 간섭하지 못하도록 막는 것을 쓰레드 동기화(synchronization)이라고 한다.


1) synchronized 키워드를 이용한 동기화
- 이 키워드는 임계 영역을 설정하는데 사용된다.
- 메서드 전체 또는 특정한 영역을 임계 영역으로 지정할 수 있다.
- 쓰레드는 synchronized 메서드가 호출된 시점부터 해당 메서드가 포함된 객체의 lock을 얻어 작업을 수행하다가 메서드가 종료되면 lock 을 반환한다.
- synchronized(객체의 참조변수 {...}) 에서 참조변수는 lock을 걸고자하는 객체를 참조하는 것이어야한다.
이 블럭을 syncrhonized 블럭이라고 부르며, 이 블럭의 영역 안으로 들어가면서부터 쓰레드는 지정된 객체의 lcok을 얻게되고,
이 블럭을 벗어나면 lcok을 반납한다. 
- lock의 획득과 반납이 모두 자동적으로 이루어지므로, 임계 영역만 설정해주면 된다.
- 모든 객체는 lock을 하나씩 가지고있으며, 해당 객체의 lock을 가지고 있는 쓰레드만 임계 영역의 코드를 수행할 수 있다. 
그리고 다른 쓰레드들은 lock을 얻을떄까지 기다리게된다.
- 임계영역은 멀티쓰레드 프로그래밍의 성능을 좌우하기 때문에 가능하면 메서듲 ㅓㄴ체에 락을 거는것보다, synchronized 블럭으로 임계 영역을 
최소화해서 보다 효율적인 프로그래밍이 되도록 노력해야한다.